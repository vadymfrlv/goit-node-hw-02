–°—Ç–≤–æ—Ä–µ–Ω–∏–π –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ [MongoDB Atlas](https://www.mongodb.com/cloud/atlas). –ß–µ—Ä–µ–∑ Compass —Å—Ç–≤–æ—Ä–µ–Ω–∞
–±–∞–∑–∞ –¥–∞–Ω–∏—Ö `db-app` —ñ –≤ –Ω—ñ–π –∫–æ–ª–µ–∫—Ü—ñ—è –∑ `contacts` —Ç–∞ `users`. –ù–∞–ø–∏—Å–∞–Ω–∏–π –∫–æ–¥ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è
–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ MongoDB –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é [Mongoose](https://mongoosejs.com/).

–°—Ö–µ–º–∞ –º–æ–¥–µ–ª—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó `contacts`:

```js
  {
    name: {
      type: String,
      required: [true, 'Set name for contact'],
    },
    email: {
      type: String,
      unique: true,
    },
    phone: {
      type: String,
      required: [true, 'Set phone for contact'],
      unique: true,
    },
    favorite: {
      type: Boolean,
      default: false,
    },
    owner: {
      type: Schema.Types.ObjectId,
      ref: 'user',
      required: true,
    },
  },
  { versionKey: false, timestamps: true }
```

–°—Ö–µ–º–∞ –º–æ–¥–µ–ª—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó `users`.

```js
  {
    name: {
      type: String,
    },
    email: {
      type: String,
      required: [true, 'Email is required'],
      match: emailRegEx,
      unique: true,
    },
    password: {
      type: String,
      required: [true, 'Password is required'],
      match: passwordRegEx,
    },
    subscription: {
      type: String,
      enum: ['starter', 'pro', 'business'],
      default: 'starter',
    },
    avatarURL: {
      type: String,
      required: true,
    },
    token: {
      type: String,
      default: '',
    },
    verify: {
      type: Boolean,
      default: false,
    },
    verificationToken: {
      type: String,
      required: [true, 'Verify token is required'],
    },
  },
  { versionKey: false, timestamps: true }
```

–°—Ö–µ–º–∞ –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ –∑—Ä–æ–±–ª–µ–Ω–∞ —Ç–∞–∫ —â–æ –∫–æ–∂–µ–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏–≤ —Ç—ñ–ª—å–∫–∏ —Å–≤–æ—ó –∫–æ–Ω—Ç–∞–∫—Ç–∏. –î–ª—è —Ü—å–æ–≥–æ –≤ —Å—Ö–µ–º—ñ
–∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ –¥–æ–¥–∞–Ω–∞ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å

```js
    owner: {
      type: Schema.Types.ObjectId,
      ref: 'user',
    }
```

–£ —Å—Ö–µ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–æ–¥–∞–Ω–æ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å `avatarURL` –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è.

```shell
{
  ...
  avatarURL: String,
  ...
}
```

–£ —Å—Ö–µ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–æ–¥–∞–Ω–æ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—ñ `verificationToken` —ñ `verify`. –ó–Ω–∞—á–µ–Ω–Ω—è –ø–æ–ª—è `verify` —Ä—ñ–≤–Ω–µ
`false` –æ–∑–Ω–∞—á–∞—Ç–∏–º–µ, —â–æ –π–æ–≥–æ email —â–µ –Ω–µ –ø—Ä–æ–π—à–æ–≤ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—é

```js
{
  verify: {
    type: Boolean,
    default: false,
  },
  verificationToken: {
    type: String,
    required: [true, 'Verify token is required'],
  },
}
```

–î–æ–¥–∞–Ω–∞ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—é email –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –ø—ñ—Å–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Å–µ—Ä–≤—ñ—Å—É
[SendGrid](https://sendgrid.com/) –ê —Ç–∞–∫–æ–∂ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∏–π –ø–∞–∫–µ—Ç
[gravatar](https://www.npmjs.com/package/gravatar) –¥–ª—è —Ç–æ–≥–æ, —â–æ–± –ø—Ä–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
–≤—ñ–¥—Ä–∞–∑—É –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –π–æ–º—É –∞–≤–∞—Ç–∞—Ä –ø–æ –π–æ–≥–æ `email`.

# REST API –ø—ñ–¥—Ç—Ä–∏–º—É—î —Ç–∞–∫—ñ —Ä–∞—É—Ç–∏ –¥–ª—è `users` üë§ :

### –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è @ POST /api/users/register

- –ó—Ä–æ–±–ª–µ–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –≤—Å—ñ—Ö –æ–±–æ–≤'—è–∑–∫–æ–≤–∏—Ö –ø–æ–ª—ñ–≤ (email —ñ password). –ü—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –ø–æ–≤–µ—Ä—Ç–∞—î
  –ø–æ–º–∏–ª–∫—É –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó.
- –£ —Ä–∞–∑—ñ —É—Å–ø—ñ—à–Ω–æ—ó –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –≤ –º–æ–¥–µ–ª—ñ `User` —Å—Ç–≤–æ—Ä—é—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ –¥–∞–Ω–∏–º–∏, —è–∫—ñ –ø—Ä–æ–π—à–ª–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é.
  –î–ª—è –∑–∞—Å–æ–ª—é–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω–∏–π [bcryptjs](https://www.npmjs.com/package/bcryptjs)
- –Ø–∫—â–æ –ø–æ—à—Ç–∞ –≤–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∫–∏–º–æ—Å—å —ñ–Ω—à–∏–º, –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ–º–∏–ª–∫—É Conflict.
- –í —ñ–Ω—à–æ–º—É –≤–∏–ø–∞–¥–∫—É –ø–æ–≤–µ—Ä—Ç–∞—î —É—Å–ø—ñ—à–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å.
- –°—Ç–≤–æ—Ä—é—î –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –∞–≤–∞—Ç–∞—Ä–∫—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é
  [gravatar](https://www.npmjs.com/package/gravatar)
- –û—Ç—Ä–∏–º–∞–Ω–∏–π URL –∑–±–µ—Ä—ñ–≥–∞—î –≤ –ø–æ–ª–µ `avatarURL` –ø—ñ–¥ —á–∞—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.

- –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è `verificationToken` –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —ñ –∑–∞–ø–∏—Å—É—î –π–æ–≥–æ —É –ë–î (–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —Ç–æ–∫–µ–Ω–∞
  –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø–∞–∫–µ—Ç [shortid](https://www.npmjs.com/package/shortid)
- –í—ñ–¥–ø—Ä–∞–≤—è—î—Ç—å—Å—è email –Ω–∞ –ø–æ—à—Ç—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —ñ –≤–∫–∞–∑—É—î—Ç—å—Å—è –ø–æ—Å–∏–ª–∞–Ω–Ω—è –¥–ª—è –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó email (
  `/users/verify/:verificationToken`) –≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—ñ.
- –¢–∞–∫–æ–∂ –≤—Ä–∞—Ö–æ–≤–∞–Ω–æ —â–æ –ª–æ–≥—ñ–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–µ –¥–æ–∑–≤–æ–ª–µ–Ω–∏–π, —è–∫—â–æ –Ω–µ –≤–µ—Ä–∏—Ñ—ñ–∫—É–≤–∞–Ω–æ email.

- –ü—ñ—Å–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó, –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ—Ç—Ä–∏–º–∞—î –ª–∏—Å—Ç –Ω–∞ –≤–∫–∞–∑–∞–Ω—É –ø—Ä–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –ø–æ—à—Ç—É –∑ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º –¥–ª—è
  –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —Å–≤–æ–≥–æ email.
- –ü—Ä–æ–π—à–æ–≤—à–∏ –ø–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—é –≤ –æ—Ç—Ä–∏–º–∞–Ω–æ–º—É –ª–∏—Å—Ç—ñ, –≤ –ø–µ—Ä—à–∏–π —Ä–∞–∑, –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ—Ç—Ä–∏–º–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å Verification
  successful, —â–æ –º–∞—î –Ω–∞ —É–≤–∞–∑—ñ —É—Å–ø—ñ—à–Ω—É –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—é email.
- –ü—Ä–æ–π—à–æ–≤—à–∏ –ø–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—é –ø–æ–≤—Ç–æ—Ä–Ω–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ—Ç—Ä–∏–º–∞—î –ø–æ–º–∏–ª–∫—É User not found.

### –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó email @ POST /api/users/verify/:verificationToken

- –ó–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `verificationToken` –≤—ñ–¥–±—É–≤–∞–µ—Ç—å—Å—è –ø–æ—à—É–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ –º–æ–¥–µ–ª—ñ `User`
- –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑ —Ç–∞–∫–∏–º —Ç–æ–∫–µ–Ω–æ–º –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∏–π, –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ–º–∏–ª–∫—É 'Not Found'.
- –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–Ω–∞–π–¥–µ–Ω–∏–π - –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î `verificationToken` –≤ `null`, –∞ –ø–æ–ª–µ `verify` –≤ `true` –≤
  –¥–æ–∫—É–º–µ–Ω—Ç—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —ñ –ø–æ–≤–µ—Ä—Ç–∞—î —É—Å–ø—ñ—à–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å.

### –ü–æ–≤—Ç–æ—Ä–Ω–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ email –∑ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º –¥–ª—è –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó email @ POST /api/users/verify

- –ë—É–ª–æ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–æ —É–º–æ–≤—É —è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∏–ø–∞–¥–∫–æ–≤–æ –≤–∏–¥–∞–ª–∏–≤ –ª–∏—Å—Ç –¥–ª—è –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó email; –∞–±–æ –≤–æ–Ω–æ –º–æ–∂–µ
  –Ω–µ –¥—ñ–π—Ç–∏ –∑ —è–∫–æ—ó—Å—å –ø—Ä–∏—á–∏–Ω–∏ –¥–æ –∞–¥—Ä–µ—Å–∞—Ç–∞; –∞–±–æ —Å–µ—Ä–≤—ñ—Å –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –ª–∏—Å—Ç—ñ–≤ –ø—ñ–¥ —á–∞—Å —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –≤–∏–¥–∞–≤
  –ø–æ–º–∏–ª–∫—É —ñ —Ç.–¥.
- –û—Ç—Ä–∏–º—É—î `body` —É —Ñ–æ—Ä–º–∞—Ç—ñ `{email}`.
- –Ø–∫—â–æ –≤ `body` –Ω–µ–º–∞—î –æ–±–æ–≤'—è–∑–∫–æ–≤–æ–≥–æ –ø–æ–ª—è `email`, –ø–æ–≤–µ—Ä—Ç–∞—î json –∑ –∫–ª—é—á–µ–º
  `{"message":"missing required field email"}` —ñ —Å—Ç–∞—Ç—É—Å–æ–º `400`.
- –Ø–∫—â–æ –∑ `body` –≤—Å–µ –¥–æ–±—Ä–µ, –≤–∏–∫–æ–Ω—É—î–º–æ –ø–æ–≤—Ç–æ—Ä–Ω—É –≤—ñ–¥–ø—Ä–∞–≤–∫—É –ª–∏—Å—Ç–∞ –∑ `verificationToken` –Ω–∞ –≤–∫–∞–∑–∞–Ω–∏–π
  email, –∞–ª–µ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –≤–µ—Ä–∏—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π.
- –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∂–µ –ø—Ä–æ–π—à–æ–≤ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—é –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ json –∑ –∫–ª—é—á–µ–º
  `{"message":"Verification has already been passed"}` –∑—ñ —Å—Ç–∞—Ç—É—Å–æ–º `400 Bad Request`.

### –õ–æ–≥—ñ–Ω @ POST /api/users/login

- –í –º–æ–¥–µ–ª—ñ `User` –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ `email`.
- –í–∞–ª—ñ–¥—É—î —É—Å—ñ –æ–±–æ–≤'—è–∑–∫–æ–≤—ñ –ø–æ–ª—è (email —ñ password). –ü—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ–º–∏–ª–∫—É –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó.
- –í —ñ–Ω—à–æ–º—É –≤–∏–ø–∞–¥–∫—É, –ø–æ—Ä—ñ–≤–Ω—é—î –ø–∞—Ä–æ–ª—å –¥–ª—è –∑–Ω–∞–π–¥–µ–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, —è–∫—â–æ –ø–∞—Ä–æ–ª—ñ –∑–±—ñ–≥–∞—é—Ç—å—Å—è —Å—Ç–≤–æ—Ä—é—î
  —Ç–æ–∫–µ–Ω, –∑–±–µ—Ä—ñ–≥–∞—î –≤ –ø–æ—Ç–æ—á–Ω–æ–≥–æ —é–∑–µ—Ä–∞ —ñ –ø–æ–≤–µ—Ä—Ç–∞—î —É—Å–ø—ñ—à–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å.
- –Ø–∫—â–æ –ø–∞—Ä–æ–ª—å –∞–±–æ —ñ–º–µ–π–ª –Ω–µ–≤—ñ—Ä–Ω–∏–π, –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ–º–∏–ª–∫—É Unauthorized.

### –õ–æ–≥–∞—É—Ç @ PATCH /api/users/logout

- –î–æ–¥–∞–Ω–∏–π –≤ —Ä–∞—É—Ç –º—ñ–¥–ª–≤–∞—Ä –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞.
- –£ –º–æ–¥–µ–ª—ñ `User` –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ `_id`.
- –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–µ —ñ—Å–Ω—É—î –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ–º–∏–ª–∫—É Unauthorized.
- –í —ñ–Ω—à–æ–º—É –≤–∏–ø–∞–¥–∫—É, –≤–∏–¥–∞–ª—è—î —Ç–æ–∫–µ–Ω —É –ø–æ—Ç–æ—á–Ω–æ–≥–æ —é–∑–µ—Ä–∞ —ñ –ø–æ–≤–µ—Ä—Ç–∞—î —É—Å–ø—ñ—à–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å.

### –ü–æ—Ç–æ—á–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á - –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–∞–Ω—ñ —é–∑–µ—Ä–∞ –ø–æ —Ç–æ–∫–µ–Ω—É @ GET /api/users/current

- –î–æ–¥–∞–Ω–∏–π –≤ —Ä–∞—É—Ç –º—ñ–¥–ª–≤–∞—Ä –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞.
- –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–µ —ñ—Å–Ω—É—î –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ–º–∏–ª–∫—É Unauthorized.
- –í —ñ–Ω—à–æ–º—É –≤–∏–ø–∞–¥–∫—É –ø–æ–≤–µ—Ä—Ç–∞—î —É—Å–ø—ñ—à–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å].

### –ü–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∞–≤–∞—Ç–∞—Ä–∫–∏ @ PATCH /api/users/avatars

- –°—Ç–≤–æ—Ä–µ–Ω–∞ –ø–∞–ø–∫–∞ `tmp` –≤ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É —ñ –∑–±–µ—Ä—ñ–≥–∞—î –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—É –∞–≤–∞—Ç–∞—Ä–∫—É.
- –ê–≤–∞—Ç–∞—Ä–∫–∞ –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è –ø–∞–∫–µ—Ç–æ–º [jimp](https://www.npmjs.com/package/jimp) —ñ —Å—Ç–∞–≤–∏—Ç—å—Å—è —Ä–æ–∑–º—ñ—Ä–∏ 250
  –Ω–∞ 250 –¥–ª—è –Ω–µ—ó.
- –ü–µ—Ä–µ–Ω–æ—Å–∏—Ç—å—Å—è –∞–≤–∞—Ç–∞—Ä–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ –ø–∞–ø–∫–∏ `tmp` –≤ –ø–∞–ø–∫—É `public/avatars` —ñ –¥–∞—î—Ç—å—Å—è —ó–π —É–Ω—ñ–∫–∞–ª—å–Ω–µ
  —ñ–º'—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–π–æ–≥–æ –∞–π–¥—ñ –∑ DB).
- –û—Ç—Ä–∏–º–∞–Ω–∏–π `URL` `/avatars/<—ñ–º'—è —Ñ–∞–π–ª—É –∑ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è–º>` –∑–±–µ—Ä—ñ–≥–∞–µ—Ç—å—Å—è –≤ –ø–æ–ª–µ `avatarURL` –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.

# REST API –ø—ñ–¥—Ç—Ä–∏–º—É—î —Ç–∞–∫—ñ —Ä–∞—É—Ç–∏ –¥–ª—è `contacts` üìí :

### @ GET /api/contacts

- –Ω—ñ—á–æ–≥–æ –Ω–µ –æ—Ç—Ä–∏–º—É—î
- –≤–∏–∫–ª–∏–∫–∞—î —Ñ—É–Ω–∫—Ü—ñ—é `listContacts` –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ json-—Ñ–∞–π–ª–æ–º `contacts.json`
- –ø–æ–≤–µ—Ä—Ç–∞—î –º–∞—Å–∏–≤ –≤—Å—ñ—Ö –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ –≤ json-—Ñ–æ—Ä–º–∞—Ç—ñ –∑—ñ —Å—Ç–∞—Ç—É—Å–æ–º `200`

### @ GET /api/contacts/:id

- –ù–µ –æ—Ç—Ä–∏–º—É—î `body`
- –û—Ç—Ä–∏–º—É—î –ø–∞—Ä–∞–º–µ—Ç—Ä `id`
- –≤–∏–∫–ª–∏–∫–∞—î —Ñ—É–Ω–∫—Ü—ñ—é `getById` –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ json-—Ñ–∞–π–ª–æ–º `contacts.json`
- —è–∫—â–æ —Ç–∞–∫–∏–π `id` —î, –ø–æ–≤–µ—Ä—Ç–∞—î –æ–±'—î–∫—Ç –∫–æ–Ω—Ç–∞–∫—Ç—É –≤ json-—Ñ–æ—Ä–º–∞—Ç—ñ –∑—ñ —Å—Ç–∞—Ç—É—Å–æ–º `200`
- —è–∫—â–æ —Ç–∞–∫–æ–≥–æ `id` –Ω–µ–º–∞—î, –ø–æ–≤–µ—Ä—Ç–∞—î json –∑ –∫–ª—é—á–µ–º `"message": "Not found"` —ñ —Å—Ç–∞—Ç—É—Å–æ–º `404`

### @ POST /api/contacts

- –û—Ç—Ä–∏–º—É—î `body` –≤ —Ñ–æ—Ä–º–∞—Ç—ñ `{name, email, phone}` (—É—Å—ñ –ø–æ–ª—è –æ–±–æ–≤'—è–∑–∫–æ–≤—ñ)
- –Ø–∫—â–æ –≤ `body` –Ω–µ–º–∞—î —è–∫–∏—Ö–æ—Å—å –æ–±–æ–≤'—è–∑–∫–æ–≤–∏—Ö –ø–æ–ª—ñ–≤, –ø–æ–≤–µ—Ä—Ç–∞—î json –∑ –∫–ª—é—á–µ–º
  `{"message": "missing required name field"}` —ñ —Å—Ç–∞—Ç—É—Å–æ–º `400`
- –Ø–∫—â–æ –∑ `body` –≤—Å–µ –¥–æ–±—Ä–µ, –¥–æ–¥–∞—î —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –≤ –æ–±'—î–∫—Ç –∫–æ–Ω—Ç–∞–∫—Ç—É
- –í–∏–∫–ª–∏–∫–∞—î —Ñ—É–Ω–∫—Ü—ñ—é `addContact(body)` –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ–Ω—Ç–∞–∫—Ç—É –≤ —Ñ–∞–π–ª—ñ `contacts.json`
- –ó–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —Ä–æ–±–æ—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—ó –ø–æ–≤–µ—Ä—Ç–∞—î –æ–±'—î–∫—Ç –∑ –¥–æ–¥–∞–Ω–∏–º `id` `{id, name, email, phone}` —ñ —Å—Ç–∞—Ç—É—Å–æ–º
  `201`

### @ DELETE /api/contacts/:id

- –ù–µ –æ—Ç—Ä–∏–º—É—î `body`
- –û—Ç—Ä–∏–º—É—î –ø–∞—Ä–∞–º–µ—Ç—Ä `id`
- –í–∏–∫–ª–∏–∫–∞—î —Ñ—É–Ω–∫—Ü—ñ—é `removeContact` –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ json-—Ñ–∞–π–ª–æ–º `contacts.json`
- —è–∫—â–æ —Ç–∞–∫–∏–π `id` —î, –ø–æ–≤–µ—Ä—Ç–∞—î json —Ñ–æ—Ä–º–∞—Ç—É `{"message": "contact deleted"}` —ñ —Å—Ç–∞—Ç—É—Å–æ–º `200`
- —è–∫—â–æ —Ç–∞–∫–æ–≥–æ `id` –Ω–µ–º–∞—î, –ø–æ–≤–µ—Ä—Ç–∞—î json –∑ –∫–ª—é—á–µ–º `"message": "Not found"` —ñ —Å—Ç–∞—Ç—É—Å–æ–º `404`

### @ PUT /api/contacts/:id

- –û—Ç—Ä–∏–º—É—î –ø–∞—Ä–∞–º–µ—Ç—Ä `id`
- –û—Ç—Ä–∏–º—É—î `body` –≤ json-—Ñ–æ—Ä–º–∞—Ç—ñ –∑ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º –±—É–¥—å-—è–∫–∏—Ö –ø–æ–ª—ñ–≤ `name, email –∏ phone`
- –Ø–∫—â–æ `body` –Ω–µ–º–∞—î, –ø–æ–≤–µ—Ä—Ç–∞—î json –∑ –∫–ª—é—á–µ–º `{"message": "missing fields"}` —ñ —Å—Ç–∞—Ç—É—Å–æ–º `400`
- –Ø–∫—â–æ –∑ `body` –≤—Å–µ –¥–æ–±—Ä–µ, –≤–∏–∫–ª–∏–∫–∞—î —Ñ—É–Ω–∫—Ü—ñ—é `updateContact(contactId, body)`. (–ù–∞–ø–∏—à–∏ —ó—ó) –¥–ª—è
  –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–Ω—Ç–∞–∫—Ç—É –≤ —Ñ–∞–π–ª—ñ `contacts.json`
- –ó–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —Ä–æ–±–æ—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—ó –ø–æ–≤–µ—Ä—Ç–∞—î –æ–Ω–æ–≤–ª–µ–Ω–∏–π –æ–±'—î–∫—Ç –∫–æ–Ω—Ç–∞–∫—Ç—É —ñ —Å—Ç–∞—Ç—É—Å–æ–º `200`. –í —ñ–Ω—à–æ–º—É
  –≤–∏–ø–∞–¥–∫—É, –ø–æ–≤–µ—Ä—Ç–∞—î json –∑ –∫–ª—é—á–µ–º `"message": "Not found"` —ñ —Å—Ç–∞—Ç—É—Å–æ–º `404`

### @ PATCH /api/contacts/:id/favorite

- –û—Ç—Ä–∏–º—É—î –ø–∞—Ä–∞–º–µ—Ç—Ä `contactId`
- –û—Ç—Ä–∏–º—É—î `body` –≤ json-—Ñ–æ—Ä–º–∞—Ç—ñ –∑ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º –ø–æ–ª—è` favorite`
- –Ø–∫—â–æ `body` –Ω–µ–º–∞—î, –ø–æ–≤–µ—Ä—Ç–∞—î json –∑ –∫–ª—é—á–µ–º`{ "message": "missing field favorite"}`—ñ —Å—Ç–∞—Ç—É—Å–æ–º` 400`
- –Ø–∫—â–æ –∑ `body` –≤—Å–µ –¥–æ–±—Ä–µ, –≤–∏–∫–ª–∏–∫–∞—î —Ñ—É–Ω–∫—Ü—ñ—é` updateStatusContact (contactId, body)` (–Ω–∞–ø–∏—à–∏ —ó—ó) –¥–ª—è
  –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–Ω—Ç–∞–∫—Ç—É –≤ –±–∞–∑—ñ)
- –ó–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —Ä–æ–±–æ—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—ó –ø–æ–≤–µ—Ä—Ç–∞—î –æ–Ω–æ–≤–ª–µ–Ω–∏–π –æ–±'—î–∫—Ç –∫–æ–Ω—Ç–∞–∫—Ç—É —ñ —Å—Ç–∞—Ç—É—Å–æ–º `200`. –í —ñ–Ω—à–æ–º—É
  –≤–∏–ø–∞–¥–∫—É, –ø–æ–≤–µ—Ä—Ç–∞—î json –∑ –∫–ª—é—á–µ–º `" message ":" Not found "` —ñ —Å—Ç–∞—Ç—É—Å–æ–º `404`

–ú–∞—Ä—à—Ä—É—Ç–∏ —â–æ –ø—Ä–∏–π–º–∞—é—Ç—å –¥–∞–Ω—ñ (`POST`, ` PUT` —Ç–∞ `PATCH `) –º–∞—é—Ç—å –≤–∞–ª—ñ–¥–∞—Ü—ñ—é –æ—Ç—Ä–∏–º–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö.

# –î–û–î–ê–¢–ö–û–í–û ‚úÖ

- #### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞:

  –°—Ç–≤–æ—Ä–µ–Ω–∏–π –º—ñ–¥–ª–≤–∞—Ä –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞ —ñ –¥–æ–¥–∞–Ω–∏–π –¥–æ –≤—Å—ñ—Ö —Ä–∞—É—Ç—ñ–≤, —è–∫—ñ –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ –∑–∞—Ö–∏—â–µ–Ω—ñ.
  –ú—ñ–¥–ª–≤–∞—Ä –±–µ—Ä–µ —Ç–æ–∫–µ–Ω –∑ –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ `Authorization`, –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Ç–æ–∫–µ–Ω –Ω–∞ –≤–∞–ª—ñ–¥–Ω—ñ—Å—Ç—å. –£ –≤–∏–ø–∞–¥–∫—É –ø–æ–º–∏–ª–∫–∏
  –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ–º–∏–ª–∫—É Unauthorized. –Ø–∫—â–æ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –ø—Ä–æ–π—à–ª–∞ —É—Å–ø—ñ—à–Ω–æ, –æ—Ç—Ä–∏–º–∞—î –∑ —Ç–æ–∫–µ–Ω–∞ `id` –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
  –ó–Ω–∞—Ö–æ–¥–∏—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö –∑ —Ü–∏–º `id`. –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —ñ—Å–Ω—É—î —ñ —Ç–æ–∫–µ–Ω –∑–±—ñ–≥–∞—î—Ç—å—Å—è –∑ —Ç–∏–º, —â–æ
  –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –±–∞–∑—ñ, –∑–∞–ø–∏—Å—É—î –π–æ–≥–æ –¥–∞–Ω—ñ –≤ `req.user` —ñ –≤–∏–∫–ª–∏–∫–∞—î `next()`. –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ —Ç–∞–∫–∏–º
  `id` –ù–ï —ñ—Å–Ω—É—î –∞–±–æ —Ç–æ–∫–µ–Ω–∏ –Ω–µ –∑–±—ñ–≥–∞—é—Ç—å—Å—è, –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ–º–∏–ª–∫—É Unauthorized.

- #### –ü–∞–≥—ñ–Ω–∞—Ü—è –¥–ª—è –∫–æ–ª–µ–∫—Ü—ñ—ó –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤:

  GET /api/users/current

- #### –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ –ø–æ –ø–æ–ª—é –æ–±—Ä–∞–Ω–æ–≥–æ:

  GET /api/contacts?favorite=true

- #### –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–∏ (`subscription`) –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:
  PATCH /api/users/ –ü—ñ–¥–ø–∏—Å–∫–∞ –º–∞' –æ–¥–Ω–µ –∑ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å `['starter', 'pro', 'business']`

### –ö–æ–º–∞–Ω–¥–∏:

- `npm start` &mdash; —Å—Ç–∞—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ä–µ–∂–∏–º—ñ production
- `npm run start:dev` &mdash; —Å—Ç–∞—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏ (development)
- `npm run lint` &mdash; –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∫–æ–¥—É –∑ eslint, –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –ø–µ—Ä–µ–¥
  –∫–æ–∂–Ω–∏–º PR —Ç–∞ –≤–∏–ø—Ä–∞–≤–ª—è—Ç–∏ –≤—Å—ñ –ø–æ–º–∏–ª–∫–∏ –ª—ñ–Ω—Ç–µ—Ä–∞
- `npm lint:fix` &mdash; —Ç–∞ –∂ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª—ñ–Ω—Ç–µ—Ä–∞, –∞–ª–µ –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è–º–∏ –ø—Ä–æ—Å—Ç–∏—Ö –ø–æ–º–∏–ª–æ–∫
